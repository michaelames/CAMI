(function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")});Array.prototype.reduce===a&&(Array.prototype.reduce=function(d){if(void 0===this||null===this)throw new TypeError;var i=Object(this),c=i.length>>>0,h=0,g;if("function"!=typeof d)throw new TypeError;if(0==c&&1==arguments.length)throw new TypeError;if(2<=arguments.length)g=arguments[1];else{do{if(h in i){g=i[h++];break}if(++h>=c)throw new TypeError;}while(1)}for(;h<c;)h in i&&
(g=d.call(a,g,i[h],h,i)),h++;return g})})();
var Zepto=function(){function a(o){return"[object Function]"==K.call(o)}function d(o){return o instanceof Object}function i(o){var b,e;if("[object Object]"!==K.call(o))return!1;e=a(o.constructor)&&o.constructor.prototype;if(!e||!hasOwnProperty.call(e,"isPrototypeOf"))return!1;for(b in o);return b===m||hasOwnProperty.call(o,b)}function c(o){return o instanceof Array}function h(o){return"number"==typeof o.length}function g(o){return o.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,
"$1_$2").replace(/_/g,"-").toLowerCase()}function k(o){return o in E?E[o]:E[o]=RegExp("(^|\\s)"+o+"(\\s|$)")}function r(o,b){return b===m?j(o):j(o).filter(b)}function n(o,b,e,f){return a(b)?b.call(o,e,f):b}function z(o,b){b(o);for(var e in o.childNodes)z(o.childNodes[e],b)}var m,p,j,q,A=[],v=A.slice,s=window.document,C={},E={},F=s.defaultView.getComputedStyle,w={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,y=[1,3,8,9,11],D=s.createElement("table"),
G=s.createElement("tr"),e={tr:s.createElement("tbody"),tbody:D,thead:D,tfoot:D,td:G,th:G,"*":s.createElement("div")},l=/complete|loaded|interactive/,x=/^\.([\w-]+)$/,I=/^#([\w-]+)$/,H=/^[\w-]+$/,K={}.toString,t={},B,u,b=s.createElement("div");return t.matches=function(o,J){if(!o||1!==o.nodeType)return!1;var e=o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.matchesSelector;if(e)return e.call(o,J);var a,e=o.parentNode,f=!e;return f&&(e=b).appendChild(o),a=~t.qsa(e,J).indexOf(o),
f&&b.removeChild(o),a},B=function(o){return o.replace(/-+(.)?/g,function(o,b){return b?b.toUpperCase():""})},u=function(o){return o.filter(function(b,e){return o.indexOf(b)==e})},t.fragment=function(b,J){J===m&&(J=f.test(b)&&RegExp.$1);J in e||(J="*");var a=e[J];return a.innerHTML=""+b,j.each(v.call(a.childNodes),function(){a.removeChild(this)})},t.Z=function(b,e){return b=b||[],b.__proto__=arguments.callee.prototype,b.selector=e||"",b},t.isZ=function(b){return b instanceof t.Z},t.init=function(b,
e){if(!b)return t.Z();if(a(b))return j(s).ready(b);if(t.isZ(b))return b;var L;if(c(b))L=b.filter(function(b){return b!==m&&null!==b});else if(i(b))L=[j.extend({},b)],b=null;else if(0<=y.indexOf(b.nodeType)||b===window)L=[b],b=null;else if(f.test(b))L=t.fragment(b.trim(),RegExp.$1),b=null;else{if(e!==m)return j(e).find(b);L=t.qsa(s,b)}return t.Z(L,b)},j=function(b,e){return t.init(b,e)},j.extend=function(b){return v.call(arguments,1).forEach(function(e){for(p in e)e[p]!==m&&(b[p]=e[p])}),b},t.qsa=
function(b,e){var a;return b===s&&I.test(e)?(a=b.getElementById(RegExp.$1))?[a]:A:1!==b.nodeType&&9!==b.nodeType?A:v.call(x.test(e)?b.getElementsByClassName(RegExp.$1):H.test(e)?b.getElementsByTagName(e):b.querySelectorAll(e))},j.isFunction=a,j.isObject=d,j.isArray=c,j.isPlainObject=i,j.inArray=function(b,e,a){return A.indexOf.call(e,b,a)},j.trim=function(b){return b.trim()},j.uuid=0,j.map=function(b,e){var a,f=[],l;if(h(b))for(l=0;l<b.length;l++)a=e(b[l],l),null!=a&&f.push(a);else for(l in b)a=e(b[l],
l),null!=a&&f.push(a);return 0<f.length?[].concat.apply([],f):f},j.each=function(b,e){var a;if(h(b))for(a=0;a<b.length&&!1!==e.call(b[a],a,b[a]);a++);else for(a in b)if(!1===e.call(b[a],a,b[a]))break;return b},j.fn={forEach:A.forEach,reduce:A.reduce,push:A.push,indexOf:A.indexOf,concat:A.concat,map:function(b){return j.map(this,function(e,a){return b.call(e,a,e)})},slice:function(){return j(v.apply(this,arguments))},ready:function(b){return l.test(s.readyState)?b(j):s.addEventListener("DOMContentLoaded",
function(){b(j)},!1),this},get:function(b){return b===m?v.call(this):this[b]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(b){return this.forEach(function(e,a){b.call(e,a,e)}),this},filter:function(b){return j([].filter.call(this,function(e){return t.matches(e,b)}))},add:function(b,e){return j(u(this.concat(j(b,e))))},is:function(b){return 0<this.length&&
t.matches(this[0],b)},not:function(b){var e=[];if(a(b)&&b.call!==m)this.each(function(a){b.call(this,a)||e.push(this)});else{var f="string"==typeof b?this.filter(b):h(b)&&a(b.item)?v.call(b):j(b);this.forEach(function(b){0>f.indexOf(b)&&e.push(b)})}return j(e)},eq:function(b){return-1===b?this.slice(b):this.slice(b,+b+1)},first:function(){var b=this[0];return b&&!d(b)?b:j(b)},last:function(){var b=this[this.length-1];return b&&!d(b)?b:j(b)},find:function(b){var e;return 1==this.length?e=t.qsa(this[0],
b):e=this.map(function(){return t.qsa(this,b)}),j(e)},closest:function(b,e){for(var a=this[0];a&&!t.matches(a,b);)a=a!==e&&a!==s&&a.parentNode;return j(a)},parents:function(b){for(var e=[],a=this;0<a.length;)a=j.map(a,function(b){if((b=b.parentNode)&&b!==s&&0>e.indexOf(b))return e.push(b),b});return r(e,b)},parent:function(b){return r(u(this.pluck("parentNode")),b)},children:function(b){return r(this.map(function(){return v.call(this.children)}),b)},siblings:function(b){return r(this.map(function(b,
o){return v.call(o.parentNode.children).filter(function(b){return b!==o})}),b)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(b){return this.map(function(){return this[b]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null);if("none"==F(this,"").getPropertyValue("display")){var b=this.style,e;e=this.nodeName;var a,f;e=(C[e]||(a=s.createElement(e),s.body.appendChild(a),f=F(a,"").getPropertyValue("display"),a.parentNode.removeChild(a),
"none"==f&&(f="block"),C[e]=f),C[e]);b.display=e}})},replaceWith:function(b){return this.before(b).remove()},wrap:function(b){return this.each(function(){j(this).wrapAll(j(b)[0].cloneNode(!1))})},wrapAll:function(b){return this[0]&&(j(this[0]).before(b=j(b)),b.append(this)),this},unwrap:function(){return this.parent().each(function(){j(this).replaceWith(j(this).children())}),this},clone:function(){return j(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display",
"none")},toggle:function(b){return(b===m?"none"==this.css("display"):b)?this.show():this.hide()},prev:function(){return j(this.pluck("previousElementSibling"))},next:function(){return j(this.pluck("nextElementSibling"))},html:function(b){return b===m?0<this.length?this[0].innerHTML:null:this.each(function(e){var a=this.innerHTML;j(this).empty().append(n(this,b,e,a))})},text:function(b){return b===m?0<this.length?this[0].textContent:null:this.each(function(){this.textContent=b})},attr:function(b,e){var a;
return"string"==typeof b&&e===m?0==this.length||1!==this[0].nodeType?m:"value"==b&&"INPUT"==this[0].nodeName?this.val():!(a=this[0].getAttribute(b))&&b in this[0]?this[0][b]:a:this.each(function(a){if(1===this.nodeType)if(d(b))for(p in b)this.setAttribute(p,b[p]);else this.setAttribute(b,n(this,e,a,this.getAttribute(b)))})},removeAttr:function(b){return this.each(function(){1===this.nodeType&&this.removeAttribute(b)})},prop:function(b,e){return e===m?this[0]?this[0][b]:m:this.each(function(a){this[b]=
n(this,e,a,this[b])})},data:function(b,e){var a=this.attr("data-"+g(b),e);return null!==a?a:m},val:function(b){return b===m?0<this.length?this[0].value:m:this.each(function(e){this.value=n(this,b,e,this.value)})},offset:function(){if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:b.width,height:b.height}},css:function(b,e){if(e===m&&"string"==typeof b)return 0==this.length?m:this[0].style[B(b)]||F(this[0],"").getPropertyValue(b);
var a="";for(p in b)"string"==typeof b[p]&&""==b[p]?this.each(function(){this.style.removeProperty(g(p))}):a+=g(p)+":"+("number"==typeof b[p]&&!w[g(p)]?b[p]+"px":b[p])+";";return"string"==typeof b&&(""==e?this.each(function(){this.style.removeProperty(g(b))}):a=g(b)+":"+("number"==typeof e&&!w[g(b)]?e+"px":e)),this.each(function(){this.style.cssText+=";"+a})},index:function(b){return b?this.indexOf(j(b)[0]):this.parent().children().indexOf(this[0])},hasClass:function(b){return 1>this.length?!1:k(b).test(this[0].className)},
addClass:function(b){return this.each(function(e){q=[];var a=this.className;n(this,b,e,a).split(/\s+/g).forEach(function(b){j(this).hasClass(b)||q.push(b)},this);q.length&&(this.className+=(a?" ":"")+q.join(" "))})},removeClass:function(b){return this.each(function(e){if(b===m)return this.className="";q=this.className;n(this,b,e,q).split(/\s+/g).forEach(function(b){q=q.replace(k(b)," ")});this.className=q.trim()})},toggleClass:function(b,e){return this.each(function(a){a=n(this,b,a,this.className);
(e===m?!j(this).hasClass(a):e)?j(this).addClass(a):j(this).removeClass(a)})}},["width","height"].forEach(function(b){j.fn[b]=function(e){var a,f=b.replace(/./,function(b){return b[0].toUpperCase()});return e===m?this[0]==window?window["inner"+f]:this[0]==s?s.documentElement["offset"+f]:(a=this.offset())&&a[b]:this.each(function(a){var f=j(this);f.css(b,n(this,e,a,f[b]()))})}}),["after","prepend","before","append"].forEach(function(b,e){j.fn[b]=function(){var b=j.map(arguments,function(b){return d(b)?
b:t.fragment(b)});if(1>b.length)return this;var o=this.length,a=1<o,f=2>e;return this.each(function(l,u){for(var c=0;c<b.length;c++){var x=b[f?b.length-c-1:c];z(x,function(b){null!=b.nodeName&&"SCRIPT"===b.nodeName.toUpperCase()&&(!b.type||"text/javascript"===b.type)&&window.eval.call(window,b.innerHTML)});a&&l<o-1&&(x=x.cloneNode(!0));var d=e%2?u:u.parentNode;d?d.insertBefore(x,e?1==e?d.firstChild:2==e?u:null:u.nextSibling):j(x).remove()}})};j.fn[e%2?b+"To":"insert"+(e?"Before":"After")]=function(e){return j(e)[b](this),
this}}),t.Z.prototype=j.fn,t.camelize=B,t.uniq=u,j.zepto=t,j}();window.Zepto=Zepto;"$"in window||(window.$=Zepto);
(function(a){function d(a){return a._zid||(a._zid=z++)}function i(a,g,i,h){g=c(g);if(g.ns)var k=RegExp("(?:^| )"+g.ns.replace(" "," .* ?")+"(?: |$)");return(n[d(a)]||[]).filter(function(a){return a&&(!g.e||a.e==g.e)&&(!g.ns||k.test(a.ns))&&(!i||d(a.fn)===d(i))&&(!h||a.sel==h)})}function c(a){a=(""+a).split(".");return{e:a[0],ns:a.slice(1).sort().join(" ")}}function h(c,d,g){a.isObject(c)?a.each(c,g):c.split(/\s/).forEach(function(a){g(a,d)})}function g(g,i,k,j,m,r){var r=!!r,p=d(g),f=n[p]||(n[p]=
[]);h(i,k,function(d,i){var h=m&&m(i,d),e=h||i,l=function(a){var f=e.apply(g,[a].concat(a.data));return!1===f&&a.preventDefault(),f},h=a.extend(c(d),{fn:i,proxy:l,sel:j,del:h,i:f.length});f.push(h);g.addEventListener(h.e,l,r)})}function k(a,c,g,k){var j=d(a);h(c||"",g,function(c,d){i(a,c,d,k).forEach(function(f){delete n[j][f.i];a.removeEventListener(f.e,f.proxy,!1)})})}function r(c){var d=a.extend({originalEvent:c},c);return a.each(q,function(a,g){d[a]=function(){return this[g]=p,c[a].apply(c,arguments)};
d[g]=j}),d}var n={},z=1,m={};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents";a.event={add:g,remove:k};a.proxy=function(c,g){if(a.isFunction(c)){var i=function(){return c.apply(g,arguments)};return i._zid=d(c),i}if("string"==typeof g)return a.proxy(c[g],c);throw new TypeError("expected function");};a.fn.bind=function(a,c){return this.each(function(){g(this,a,c)})};a.fn.unbind=function(a,c){return this.each(function(){k(this,a,c)})};a.fn.one=function(a,c){return this.each(function(d,i){g(this,
a,c,null,function(a,c){return function(){var d=a.apply(i,arguments);return k(i,c,a),d}})})};var p=function(){return!0},j=function(){return!1},q={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(c,d,i){var h=!1;if("blur"==d||"focus"==d)a.iswebkit?d="blur"==d?"focusout":"focus"==d?"focusin":d:h=!0;return this.each(function(k,j){g(j,d,i,c,function(d){return function(f){var g,i=a(f.target).closest(c,
j).get(0);if(i)return g=a.extend(r(f),{currentTarget:i,liveFired:j}),d.apply(i,[g].concat([].slice.call(arguments,1)))}},h)})};a.fn.undelegate=function(a,c,d){return this.each(function(){k(this,c,d,a)})};a.fn.live=function(c,d){return a(document.body).delegate(this.selector,c,d),this};a.fn.die=function(c,d){return a(document.body).undelegate(this.selector,c,d),this};a.fn.on=function(c,d,g){return void 0==d||a.isFunction(d)?this.bind(c,d):this.delegate(d,c,g)};a.fn.off=function(c,d,g){return void 0==
d||a.isFunction(d)?this.unbind(c,d):this.undelegate(d,c,g)};a.fn.trigger=function(c,d){"string"==typeof c&&(c=a.Event(c));var g=c;if(!("defaultPrevented"in g)){g.defaultPrevented=!1;var i=g.preventDefault;g.preventDefault=function(){this.defaultPrevented=!0;i.call(this)}}return c.data=d,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(c)})};a.fn.triggerHandler=function(c,d){var g,h;return this.each(function(k,j){g=r("string"==typeof c?a.Event(c):c);g.data=d;g.target=j;a.each(i(j,c.type||
c),function(a,f){h=f.proxy(g);if(g.isImmediatePropagationStopped())return!1})}),h};"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(c){a.fn[c]=function(a){return this.bind(c,a)}});["focus","blur"].forEach(function(c){a.fn[c]=function(a){if(a)this.bind(c,a);else if(this.length)try{this.get(0)[c]()}catch(d){}return this}});a.Event=function(a,c){var d=document.createEvent(m[a]||
"Events"),g=!0;if(c)for(var i in c)"bubbles"==i?g=!!c[i]:d[i]=c[i];return d.initEvent(a,g,!0,null,null,null,null,null,null,null,null,null,null,null,null),d}})(Zepto);
(function(a){function d(a){var c=this.os={},d=this.browser={},g=a.match(/WebKit\/([\d.]+)/),k=a.match(/(Android)\s+([\d.]+)/),r=a.match(/(iPad).*OS\s([\d_]+)/),n=!r&&a.match(/(iPhone\sOS)\s([\d_]+)/),z=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),m=z&&a.match(/TouchPad/),p=a.match(/Kindle\/([\d.]+)/),j=a.match(/Silk\/([\d._]+)/),q=a.match(/(BlackBerry).*Version\/([\d.]+)/);if(d.webkit=!!g)d.version=g[1];k&&(c.android=!0,c.version=k[2]);n&&(c.ios=c.iphone=!0,c.version=n[2].replace(/_/g,"."));r&&(c.ios=c.ipad=
!0,c.version=r[2].replace(/_/g,"."));z&&(c.webos=!0,c.version=z[2]);m&&(c.touchpad=!0);q&&(c.blackberry=!0,c.version=q[2]);p&&(c.kindle=!0,c.version=p[1]);j&&(d.silk=!0,d.version=j[1]);!j&&c.android&&a.match(/Kindle Fire/)&&(d.silk=!0)}d.call(a,navigator.userAgent);a.__detect=d})(Zepto);
(function(a,d){var i="",c,h=window.document.createElement("div"),g=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k={};a.each({Webkit:"webkit",Moz:"",O:"o",ms:"MS"},function(a,g){if(h.style[a+"TransitionProperty"]!==d)return i="-"+a.toLowerCase()+"-",c=g,!1});k[i+"transition-property"]=k[i+"transition-duration"]=k[i+"transition-timing-function"]=k[i+"animation-name"]=k[i+"animation-duration"]="";a.fx={off:c===d&&h.style.transitionProperty===d,cssPrefix:i,transitionEnd:c?
c+"TransitionEnd":"transitionend",animationEnd:c?c+"AnimationEnd":"animationend"};a.fn.animate=function(c,d,g,i){return a.isObject(d)&&(g=d.easing,i=d.complete,d=d.duration),d&&(d/=1E3),this.anim(c,d,g,i)};a.fn.anim=function(c,h,z,m){var p,j={},q,A=this,v,s=a.fx.transitionEnd;h===d&&(h=0.4);a.fx.off&&(h=0);if("string"==typeof c)j[i+"animation-name"]=c,j[i+"animation-duration"]=h+"s",s=a.fx.animationEnd;else{for(q in c)g.test(q)?(p||(p=[]),p.push(q+"("+c[q]+")")):j[q]=c[q];p&&(j[i+"transform"]=p.join(" "));
!a.fx.off&&"object"==typeof c&&(j[i+"transition-property"]=Object.keys(c).join(", "),j[i+"transition-duration"]=h+"s",j[i+"transition-timing-function"]=z||"linear")}return v=function(c){if("undefined"!=typeof c){if(c.target!==c.currentTarget)return;a(c.target).unbind(s,arguments.callee)}a(this).css(k);m&&m.call(this)},0<h&&this.bind(s,v),setTimeout(function(){A.css(j);0>=h&&setTimeout(function(){A.each(function(){v.call(this)})},0)},0),this};h=null})(Zepto);
(function(a){function d(f,c,d,g){if(f.global)return f=c||p,d=a.Event(d),a(f).trigger(d,g),!d.defaultPrevented}function i(a,c,g){var i=g.context;g.success.call(i,a,"success",c);d(g,i,"ajaxSuccess",[c,g,a]);h("success",c,g)}function c(a,c,g,i){var e=i.context;i.error.call(e,g,c,a);d(i,e,"ajaxError",[g,i,a]);h(c,g,i)}function h(c,g,i){var h=i.context;i.complete.call(h,g,c);d(i,h,"ajaxComplete",[g,i]);i.global&&!--a.active&&d(i,null,"ajaxStop")}function g(){}function k(a){return a&&(a==E?"html":a==C?
"json":v.test(a)?"script":s.test(a)&&"xml")||"text"}function r(c){m(c.data)&&(c.data=a.param(c.data));c.data&&(!c.type||"GET"==c.type.toUpperCase())&&(c.url=(c.url+"&"+c.data).replace(/[&?]{1,2}/,"?"))}function n(c,d,g,i){var e=a.isArray(d);a.each(d,function(l,d){i&&(l=g?i:i+"["+(e?"":l)+"]");!i&&e?c.add(d.name,d.value):(g?a.isArray(d):m(d))?n(c,d,g,l):c.add(l,d)})}var z=0,m=a.isObject,p=window.document,j,q,A=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,v=/^(?:text|application)\/javascript/i,
s=/^(?:text|application)\/xml/i,C="application/json",E="text/html",F=/^\s*$/;a.active=0;a.ajaxJSONP=function(c){var d="jsonp"+ ++z,k=p.createElement("script"),j={abort:function(){a(k).remove();d in window&&(window[d]=g);h("abort",j,c)}},e;return c.error&&(k.onerror=function(){j.abort();c.error()}),window[d]=function(l){clearTimeout(e);a(k).remove();delete window[d];i(l,j,c)},r(c),k.src=c.url.replace(/=\?/,"="+d),a("head").append(k),0<c.timeout&&(e=setTimeout(function(){j.abort();h("timeout",j,c)},
c.timeout)),j};a.ajaxSettings={type:"GET",beforeSend:g,success:g,error:g,complete:g,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:C,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0};a.ajax=function(f){var h=a.extend({},f||{});for(j in a.ajaxSettings)void 0===h[j]&&(h[j]=a.ajaxSettings[j]);h.global&&0===a.active++&&d(h,null,"ajaxStart");h.crossDomain||(h.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(h.url)&&
RegExp.$2!=window.location.host);var n=h.dataType,f=/=\?/.test(h.url);if("jsonp"==n||f)return f||(h.url=(h.url+"&callback=?").replace(/[&?]{1,2}/,"?")),a.ajaxJSONP(h);h.url||(h.url=window.location.toString());r(h);var f=h.accepts[n],m={},e=/^([\w-]+:)\/\//.test(h.url)?RegExp.$1:window.location.protocol,l=a.ajaxSettings.xhr(),x;h.crossDomain||(m["X-Requested-With"]="XMLHttpRequest");f&&(m.Accept=f,-1<f.indexOf(",")&&(f=f.split(",",2)[0]),l.overrideMimeType&&l.overrideMimeType(f));if(h.contentType||
h.data&&"GET"!=h.type.toUpperCase())m["Content-Type"]=h.contentType||"application/x-www-form-urlencoded";h.headers=a.extend(m,h.headers||{});l.onreadystatechange=function(){if(4==l.readyState){clearTimeout(x);var a,f=!1;if(200<=l.status&&300>l.status||304==l.status||0==l.status&&"file:"==e){n=n||k(l.getResponseHeader("content-type"));a=l.responseText;try{"script"==n?(0,eval)(a):"xml"==n?a=l.responseXML:"json"==n&&(a=F.test(a)?null:JSON.parse(a))}catch(d){f=d}f?c(f,"parsererror",l,h):i(a,l,h)}else c(null,
"error",l,h)}};l.open(h.type,h.url,"async"in h?h.async:!0);for(q in h.headers)l.setRequestHeader(q,h.headers[q]);f=h.context;!1===h.beforeSend.call(f,l,h)||!1===d(h,f,"ajaxBeforeSend",[l,h])?f=!1:(d(h,f,"ajaxSend",[l,h]),f=void 0);return!1===f?(l.abort(),!1):(0<h.timeout&&(x=setTimeout(function(){l.onreadystatechange=g;l.abort();c(null,"timeout",l,h)},h.timeout)),l.send(h.data?h.data:null),l)};a.get=function(c,d){return a.ajax({url:c,success:d})};a.post=function(c,d,g,h){return a.isFunction(d)&&(h=
h||g,g=d,d=null),a.ajax({type:"POST",url:c,data:d,success:g,dataType:h})};a.getJSON=function(c,d){return a.ajax({url:c,success:d,dataType:"json"})};a.fn.load=function(c,d){if(!this.length)return this;var g=this,h=c.split(/\s/),e;return 1<h.length&&(c=h[0],e=h[1]),a.get(c,function(c){g.html(e?a(p.createElement("div")).html(c.replace(A,"")).find(e).html():c);d&&d.call(g)}),this};var w=encodeURIComponent;a.param=function(a,c){var d=[];return d.add=function(a,e){this.push(w(a)+"="+w(e))},n(d,a,c),d.join("&").replace("%20",
"+")}})(Zepto);
(function(a){a.fn.serializeArray=function(){var d=[],i;return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){i=a(this);var c=i.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=c&&"reset"!=c&&"button"!=c&&("radio"!=c&&"checkbox"!=c||this.checked)&&d.push({name:i.attr("name"),value:i.val()})}),d};a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(i){a.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),a.join("&")};
a.fn.submit=function(d){d?this.bind("submit",d):this.length&&(d=a.Event("submit"),this.eq(0).trigger(d),d.defaultPrevented||this.get(0).submit());return this}})(Zepto);
(function(a){function d(a,c,d,g){var h=Math.abs(a-c),i=Math.abs(d-g);return h>=i?0<a-c?"Left":"Right":0<d-g?"Up":"Down"}function i(){g=null;c.last&&(c.el.trigger("longTap"),c={})}var c={},h,g;a(document).ready(function(){var k,r;a(document.body).bind("touchstart",function(d){k=Date.now();r=k-(c.last||k);c.el=a("tagName"in d.touches[0].target?d.touches[0].target:d.touches[0].target.parentNode);h&&clearTimeout(h);c.x1=d.touches[0].pageX;c.y1=d.touches[0].pageY;0<r&&250>=r&&(c.isDoubleTap=!0);c.last=
k;g=setTimeout(i,750)}).bind("touchmove",function(a){g&&clearTimeout(g);g=null;c.x2=a.touches[0].pageX;c.y2=a.touches[0].pageY}).bind("touchend",function(){g&&clearTimeout(g);g=null;c.isDoubleTap?(c.el.trigger("doubleTap"),c={}):c.x2&&30<Math.abs(c.x1-c.x2)||c.y2&&30<Math.abs(c.y1-c.y2)?(c.el.trigger("swipe")&&c.el.trigger("swipe"+d(c.x1,c.x2,c.y1,c.y2)),c={}):"last"in c&&(c.el.trigger("tap"),h=setTimeout(function(){h=null;c.el.trigger("singleTap");c={}},250))}).bind("touchcancel",function(){h&&clearTimeout(h);
g&&clearTimeout(g);g=h=null;c={}})});"swipe swipeLeft swipeRight swipeUp swipeDown doubleTap tap singleTap longTap".split(" ").forEach(function(c){a.fn[c]=function(a){return this.bind(c,a)}})})(Zepto);(function(){function a(b,e,c){if(b===e)return 0!==b||1/b==1/e;if(null==b||null==e)return b===e;b._chain&&(b=b._wrapped);e._chain&&(e=e._wrapped);if(b.isEqual&&f.isFunction(b.isEqual))return b.isEqual(e);if(e.isEqual&&f.isFunction(e.isEqual))return e.isEqual(b);var l=n.call(b);if(l!=n.call(e))return!1;switch(l){case "[object String]":return b==""+e;case "[object Number]":return b!=+b?e!=+e:0==b?1/b==1/e:b==+e;case "[object Date]":case "[object Boolean]":return+b==+e;case "[object RegExp]":return b.source==
e.source&&b.global==e.global&&b.multiline==e.multiline&&b.ignoreCase==e.ignoreCase}if("object"!=typeof b||"object"!=typeof e)return!1;for(var d=c.length;d--;)if(c[d]==b)return!0;c.push(b);var d=0,u=!0;if("[object Array]"==l){if(d=b.length,u=d==e.length)for(;d--&&(u=d in b==d in e&&a(b[d],e[d],c)););}else{if("constructor"in b!="constructor"in e||b.constructor!=e.constructor)return!1;for(var g in b)if(f.has(b,g)&&(d++,!(u=f.has(e,g)&&a(b[g],e[g],c))))break;if(u){for(g in e)if(f.has(e,g)&&!d--)break;
u=!d}}c.pop();return u}var d=this,i=d._,c={},h=Array.prototype,g=Object.prototype,k=h.slice,r=h.unshift,n=g.toString,z=g.hasOwnProperty,m=h.forEach,p=h.map,j=h.reduce,q=h.reduceRight,A=h.filter,v=h.every,s=h.some,C=h.indexOf,E=h.lastIndexOf,g=Array.isArray,F=Object.keys,w=Function.prototype.bind,f=function(b){return new B(b)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=f),exports._=f):d._=f;f.VERSION="1.3.3";var y=f.each=f.forEach=function(b,
a,e){if(null!=b)if(m&&b.forEach===m)b.forEach(a,e);else if(b.length===+b.length)for(var l=0,d=b.length;l<d&&!(l in b&&a.call(e,b[l],l,b)===c);l++);else for(l in b)if(f.has(b,l)&&a.call(e,b[l],l,b)===c)break};f.map=f.collect=function(b,a,e){var c=[];if(null==b)return c;if(p&&b.map===p)return b.map(a,e);y(b,function(b,l,d){c[c.length]=a.call(e,b,l,d)});b.length===+b.length&&(c.length=b.length);return c};f.reduce=f.foldl=f.inject=function(b,a,e,c){var l=2<arguments.length;null==b&&(b=[]);if(j&&b.reduce===
j)return c&&(a=f.bind(a,c)),l?b.reduce(a,e):b.reduce(a);y(b,function(b,d,f){l?e=a.call(c,e,b,d,f):(e=b,l=!0)});if(!l)throw new TypeError("Reduce of empty array with no initial value");return e};f.reduceRight=f.foldr=function(b,a,e,c){var l=2<arguments.length;null==b&&(b=[]);if(q&&b.reduceRight===q)return c&&(a=f.bind(a,c)),l?b.reduceRight(a,e):b.reduceRight(a);var d=f.toArray(b).reverse();c&&!l&&(a=f.bind(a,c));return l?f.reduce(d,a,e,c):f.reduce(d,a)};f.find=f.detect=function(b,a,e){var c;D(b,function(b,
l,d){if(a.call(e,b,l,d))return c=b,!0});return c};f.filter=f.select=function(b,a,e){var c=[];if(null==b)return c;if(A&&b.filter===A)return b.filter(a,e);y(b,function(b,l,d){a.call(e,b,l,d)&&(c[c.length]=b)});return c};f.reject=function(b,a,e){var c=[];if(null==b)return c;y(b,function(b,l,d){a.call(e,b,l,d)||(c[c.length]=b)});return c};f.every=f.all=function(b,a,e){var l=!0;if(null==b)return l;if(v&&b.every===v)return b.every(a,e);y(b,function(b,d,f){if(!(l=l&&a.call(e,b,d,f)))return c});return!!l};
var D=f.some=f.any=function(b,a,e){a||(a=f.identity);var l=!1;if(null==b)return l;if(s&&b.some===s)return b.some(a,e);y(b,function(b,d,f){if(l||(l=a.call(e,b,d,f)))return c});return!!l};f.include=f.contains=function(b,a){return null==b?!1:C&&b.indexOf===C?-1!=b.indexOf(a):D(b,function(b){return b===a})};f.invoke=function(b,a){var e=k.call(arguments,2);return f.map(b,function(b){return(f.isFunction(a)?a||b:b[a]).apply(b,e)})};f.pluck=function(b,a){return f.map(b,function(b){return b[a]})};f.max=function(b,
a,e){if(!a&&f.isArray(b)&&b[0]===+b[0])return Math.max.apply(Math,b);if(!a&&f.isEmpty(b))return-Infinity;var c={computed:-Infinity};y(b,function(b,l,d){l=a?a.call(e,b,l,d):b;l>=c.computed&&(c={value:b,computed:l})});return c.value};f.min=function(b,a,e){if(!a&&f.isArray(b)&&b[0]===+b[0])return Math.min.apply(Math,b);if(!a&&f.isEmpty(b))return Infinity;var c={computed:Infinity};y(b,function(b,l,d){l=a?a.call(e,b,l,d):b;l<c.computed&&(c={value:b,computed:l})});return c.value};f.shuffle=function(b){var a=
[],e;y(b,function(b,c){e=Math.floor(Math.random()*(c+1));a[c]=a[e];a[e]=b});return a};f.sortBy=function(b,a,e){var c=f.isFunction(a)?a:function(b){return b[a]};return f.pluck(f.map(b,function(b,a,o){return{value:b,criteria:c.call(e,b,a,o)}}).sort(function(b,a){var e=b.criteria,c=a.criteria;return void 0===e?1:void 0===c?-1:e<c?-1:e>c?1:0}),"value")};f.groupBy=function(b,a){var e={},c=f.isFunction(a)?a:function(b){return b[a]};y(b,function(b,a){var o=c(b,a);(e[o]||(e[o]=[])).push(b)});return e};f.sortedIndex=
function(b,a,e){e||(e=f.identity);for(var c=0,l=b.length;c<l;){var d=c+l>>1;e(b[d])<e(a)?c=d+1:l=d}return c};f.toArray=function(b){return!b?[]:f.isArray(b)||f.isArguments(b)?k.call(b):b.toArray&&f.isFunction(b.toArray)?b.toArray():f.values(b)};f.size=function(b){return f.isArray(b)?b.length:f.keys(b).length};f.first=f.head=f.take=function(b,a,e){return null!=a&&!e?k.call(b,0,a):b[0]};f.initial=function(b,a,e){return k.call(b,0,b.length-(null==a||e?1:a))};f.last=function(b,a,e){return null!=a&&!e?
k.call(b,Math.max(b.length-a,0)):b[b.length-1]};f.rest=f.tail=function(b,a,e){return k.call(b,null==a||e?1:a)};f.compact=function(b){return f.filter(b,function(b){return!!b})};f.flatten=function(b,a){return f.reduce(b,function(b,e){if(f.isArray(e))return b.concat(a?e:f.flatten(e));b[b.length]=e;return b},[])};f.without=function(b){return f.difference(b,k.call(arguments,1))};f.uniq=f.unique=function(b,a,e){var e=e?f.map(b,e):b,c=[];3>b.length&&(a=!0);f.reduce(e,function(e,l,d){if(a?f.last(e)!==l||
!e.length:!f.include(e,l))e.push(l),c.push(b[d]);return e},[]);return c};f.union=function(){return f.uniq(f.flatten(arguments,!0))};f.intersection=f.intersect=function(b){var a=k.call(arguments,1);return f.filter(f.uniq(b),function(b){return f.every(a,function(a){return 0<=f.indexOf(a,b)})})};f.difference=function(b){var a=f.flatten(k.call(arguments,1),!0);return f.filter(b,function(b){return!f.include(a,b)})};f.zip=function(){for(var b=k.call(arguments),a=f.max(f.pluck(b,"length")),e=Array(a),c=
0;c<a;c++)e[c]=f.pluck(b,""+c);return e};f.indexOf=function(b,a,e){if(null==b)return-1;var c;if(e)return e=f.sortedIndex(b,a),b[e]===a?e:-1;if(C&&b.indexOf===C)return b.indexOf(a);e=0;for(c=b.length;e<c;e++)if(e in b&&b[e]===a)return e;return-1};f.lastIndexOf=function(b,a){if(null==b)return-1;if(E&&b.lastIndexOf===E)return b.lastIndexOf(a);for(var e=b.length;e--;)if(e in b&&b[e]===a)return e;return-1};f.range=function(b,a,e){1>=arguments.length&&(a=b||0,b=0);for(var e=arguments[2]||1,c=Math.max(Math.ceil((a-
b)/e),0),l=0,d=Array(c);l<c;)d[l++]=b,b+=e;return d};var G=function(){};f.bind=function(b,a){var e,c;if(b.bind===w&&w)return w.apply(b,k.call(arguments,1));if(!f.isFunction(b))throw new TypeError;c=k.call(arguments,2);return e=function(){if(!(this instanceof e))return b.apply(a,c.concat(k.call(arguments)));G.prototype=b.prototype;var l=new G,d=b.apply(l,c.concat(k.call(arguments)));return Object(d)===d?d:l}};f.bindAll=function(b){var a=k.call(arguments,1);0==a.length&&(a=f.functions(b));y(a,function(a){b[a]=
f.bind(b[a],b)});return b};f.memoize=function(b,a){var e={};a||(a=f.identity);return function(){var c=a.apply(this,arguments);return f.has(e,c)?e[c]:e[c]=b.apply(this,arguments)}};f.delay=function(b,a){var e=k.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},a)};f.defer=function(b){return f.delay.apply(f,[b,1].concat(k.call(arguments,1)))};f.throttle=function(b,a){var e,c,l,d,u,g,x=f.debounce(function(){u=d=!1},a);return function(){e=this;c=arguments;l||(l=setTimeout(function(){l=
null;u&&b.apply(e,c);x()},a));d?u=!0:g=b.apply(e,c);x();d=!0;return g}};f.debounce=function(b,a,e){var c;return function(){var l=this,d=arguments;e&&!c&&b.apply(l,d);clearTimeout(c);c=setTimeout(function(){c=null;e||b.apply(l,d)},a)}};f.once=function(b){var a=!1,e;return function(){if(a)return e;a=!0;return e=b.apply(this,arguments)}};f.wrap=function(b,a){return function(){var e=[b].concat(k.call(arguments,0));return a.apply(this,e)}};f.compose=function(){var b=arguments;return function(){for(var a=
arguments,e=b.length-1;0<=e;e--)a=[b[e].apply(this,a)];return a[0]}};f.after=function(b,a){return 0>=b?a():function(){if(1>--b)return a.apply(this,arguments)}};f.keys=F||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var a=[],e;for(e in b)f.has(b,e)&&(a[a.length]=e);return a};f.values=function(b){return f.map(b,f.identity)};f.functions=f.methods=function(b){var a=[],e;for(e in b)f.isFunction(b[e])&&a.push(e);return a.sort()};f.extend=function(b){y(k.call(arguments,1),function(a){for(var e in a)b[e]=
a[e]});return b};f.pick=function(b){var a={};y(f.flatten(k.call(arguments,1)),function(e){e in b&&(a[e]=b[e])});return a};f.defaults=function(b){y(k.call(arguments,1),function(a){for(var e in a)null==b[e]&&(b[e]=a[e])});return b};f.clone=function(b){return!f.isObject(b)?b:f.isArray(b)?b.slice():f.extend({},b)};f.tap=function(b,a){a(b);return b};f.isEqual=function(b,e){return a(b,e,[])};f.isEmpty=function(b){if(null==b)return!0;if(f.isArray(b)||f.isString(b))return 0===b.length;for(var a in b)if(f.has(b,
a))return!1;return!0};f.isElement=function(b){return!!(b&&1==b.nodeType)};f.isArray=g||function(b){return"[object Array]"==n.call(b)};f.isObject=function(b){return b===Object(b)};f.isArguments=function(b){return"[object Arguments]"==n.call(b)};f.isArguments(arguments)||(f.isArguments=function(b){return!(!b||!f.has(b,"callee"))});f.isFunction=function(b){return"[object Function]"==n.call(b)};f.isString=function(b){return"[object String]"==n.call(b)};f.isNumber=function(b){return"[object Number]"==
n.call(b)};f.isFinite=function(b){return f.isNumber(b)&&isFinite(b)};f.isNaN=function(b){return b!==b};f.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==n.call(b)};f.isDate=function(b){return"[object Date]"==n.call(b)};f.isRegExp=function(b){return"[object RegExp]"==n.call(b)};f.isNull=function(b){return null===b};f.isUndefined=function(b){return void 0===b};f.has=function(b,a){return z.call(b,a)};f.noConflict=function(){d._=i;return this};f.identity=function(b){return b};f.times=
function(b,a,e){for(var c=0;c<b;c++)a.call(e,c)};f.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};f.result=function(b,a){if(null==b)return null;var e=b[a];return f.isFunction(e)?e.call(b):e};f.mixin=function(b){y(f.functions(b),function(a){var e=f[a]=b[a];B.prototype[a]=function(){var b=k.call(arguments);r.call(b,this._wrapped);return u(e.apply(f,b),this._chain)}})};var e=0;f.uniqueId=
function(b){var a=e++;return b?b+a:a};f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var l=/.^/,x={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},I;for(I in x)x[x[I]]=I;var H=/\\|'|\r|\n|\t|\u2028|\u2029/g,K=/\\(\\|'|r|n|t|u2028|u2029)/g,t=function(b){return b.replace(K,function(b,a){return x[a]})};f.template=function(b,a,e){e=f.defaults(e||{},f.templateSettings);b="__p+='"+b.replace(H,function(b){return"\\"+x[b]}).replace(e.escape||
l,function(b,a){return"'+\n_.escape("+t(a)+")+\n'"}).replace(e.interpolate||l,function(b,a){return"'+\n("+t(a)+")+\n'"}).replace(e.evaluate||l,function(b,a){return"';\n"+t(a)+"\n;__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",c=new Function(e.variable||"obj","_",b);if(a)return c(a,f);a=function(b){return c.call(this,b,f)};a.source="function("+(e.variable||"obj")+"){\n"+b+"}";return a};
f.chain=function(b){return f(b).chain()};var B=function(b){this._wrapped=b};f.prototype=B.prototype;var u=function(b,a){return a?f(b).chain():b};f.mixin(f);y("pop push reverse shift sort splice unshift".split(" "),function(b){var a=h[b];B.prototype[b]=function(){var e=this._wrapped;a.apply(e,arguments);var c=e.length;(b=="shift"||b=="splice")&&c===0&&delete e[0];return u(e,this._chain)}});y(["concat","join","slice"],function(b){var a=h[b];B.prototype[b]=function(){return u(a.apply(this._wrapped,arguments),
this._chain)}});B.prototype.chain=function(){this._chain=!0;return this};B.prototype.value=function(){return this._wrapped}}).call(this);(function(){var a=this,d=a.Backbone,i=Array.prototype.slice,c=Array.prototype.splice,h;h="undefined"!==typeof exports?exports:a.Backbone={};h.VERSION="0.9.2";var g=a._;!g&&"undefined"!==typeof require&&(g=require("underscore"));var k=a.jQuery||a.Zepto||a.ender;h.setDomLibrary=function(a){k=a};h.noConflict=function(){a.Backbone=d;return this};h.emulateHTTP=!1;h.emulateJSON=!1;var r=/\s+/,n=h.Events={on:function(a,c,d){var f,g,h,i,k;if(!c)return this;a=a.split(r);for(f=this._callbacks||(this._callbacks=
{});g=a.shift();)h=(k=f[g])?k.tail:{},h.next=i={},h.context=d,h.callback=c,f[g]={tail:i,next:k?k.next:h};return this},off:function(a,c,d){var f,h,i,k,j,u;if(h=this._callbacks){if(!a&&!c&&!d)return delete this._callbacks,this;for(a=a?a.split(r):g.keys(h);f=a.shift();)if(i=h[f],delete h[f],i&&(c||d))for(k=i.tail;(i=i.next)!==k;)if(j=i.callback,u=i.context,c&&j!==c||d&&u!==d)this.on(f,j,u);return this}},trigger:function(a){var c,d,f,g,h,k;if(!(f=this._callbacks))return this;h=f.all;a=a.split(r);for(k=
i.call(arguments,1);c=a.shift();){if(d=f[c])for(g=d.tail;(d=d.next)!==g;)d.callback.apply(d.context||this,k);if(d=h){g=d.tail;for(c=[c].concat(k);(d=d.next)!==g;)d.callback.apply(d.context||this,c)}}return this}};n.bind=n.on;n.unbind=n.off;var z=h.Model=function(a,c){var d;a||(a={});c&&c.parse&&(a=this.parse(a));if(d=D(this,"defaults"))a=g.extend({},d,a);c&&c.collection&&(this.collection=c.collection);this.attributes={};this._escapedAttributes={};this.cid=g.uniqueId("c");this.changed={};this._silent=
{};this._pending={};this.set(a,{silent:!0});this.changed={};this._silent={};this._pending={};this._previousAttributes=g.clone(this.attributes);this.initialize.apply(this,arguments)};g.extend(z.prototype,n,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return g.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var c;if(c=this._escapedAttributes[a])return c;c=this.get(a);return this._escapedAttributes[a]=g.escape(null==
c?"":""+c)},has:function(a){return null!=this.get(a)},set:function(a,c,d){var f,h;g.isObject(a)||null==a?(f=a,d=c):(f={},f[a]=c);d||(d={});if(!f)return this;f instanceof z&&(f=f.attributes);if(d.unset)for(h in f)f[h]=void 0;if(!this._validate(f,d))return!1;this.idAttribute in f&&(this.id=f[this.idAttribute]);var c=d.changes={},i=this.attributes,k=this._escapedAttributes,j=this._previousAttributes||{};for(h in f){a=f[h];if(!g.isEqual(i[h],a)||d.unset&&g.has(i,h))delete k[h],(d.silent?this._silent:
c)[h]=!0;d.unset?delete i[h]:i[h]=a;!g.isEqual(j[h],a)||g.has(i,h)!=g.has(j,h)?(this.changed[h]=a,d.silent||(this._pending[h]=!0)):(delete this.changed[h],delete this._pending[h])}d.silent||this.change(d);return this},unset:function(a,c){(c||(c={})).unset=!0;return this.set(a,null,c)},clear:function(a){(a||(a={})).unset=!0;return this.set(g.clone(this.attributes),a)},fetch:function(a){var a=a?g.clone(a):{},c=this,d=a.success;a.success=function(f,g,h){if(!c.set(c.parse(f,h),a))return!1;d&&d(c,f)};
a.error=h.wrapError(a.error,c,a);return(this.sync||h.sync).call(this,"read",this,a)},save:function(a,c,d){var f,i;g.isObject(a)||null==a?(f=a,d=c):(f={},f[a]=c);d=d?g.clone(d):{};if(d.wait){if(!this._validate(f,d))return!1;i=g.clone(this.attributes)}a=g.extend({},d,{silent:!0});if(f&&!this.set(f,d.wait?a:d))return!1;var k=this,j=d.success;d.success=function(a,e,b){e=k.parse(a,b);d.wait&&(delete d.wait,e=g.extend(f||{},e));if(!k.set(e,d))return!1;j?j(k,a):k.trigger("sync",k,a,d)};d.error=h.wrapError(d.error,
k,d);c=this.isNew()?"create":"update";c=(this.sync||h.sync).call(this,c,this,d);d.wait&&this.set(i,a);return c},destroy:function(a){var a=a?g.clone(a):{},c=this,d=a.success,f=function(){c.trigger("destroy",c,c.collection,a)};if(this.isNew())return f(),!1;a.success=function(g){a.wait&&f();d?d(c,g):c.trigger("sync",c,g,a)};a.error=h.wrapError(a.error,c,a);var i=(this.sync||h.sync).call(this,"delete",this,a);a.wait||f();return i},url:function(){var a=D(this,"urlRoot")||D(this.collection,"url")||G();
return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var c=this._changing;this._changing=!0;for(var d in this._silent)this._pending[d]=!0;var f=g.extend({},a.changes,this._silent);this._silent={};for(d in f)this.trigger("change:"+d,this,this.get(d),a);if(c)return this;for(;!g.isEmpty(this._pending);){this._pending=
{};this.trigger("change",this,a);for(d in this.changed)!this._pending[d]&&!this._silent[d]&&delete this.changed[d];this._previousAttributes=g.clone(this.attributes)}this._changing=!1;return this},hasChanged:function(a){return!arguments.length?!g.isEmpty(this.changed):g.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?g.clone(this.changed):!1;var c,d=!1,f=this._previousAttributes,h;for(h in a)if(!g.isEqual(f[h],c=a[h]))(d||(d={}))[h]=c;return d},previous:function(a){return!arguments.length||
!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return g.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,c){if(c.silent||!this.validate)return!0;var a=g.extend({},this.attributes,a),d=this.validate(a,c);if(!d)return!0;c&&c.error?c.error(this,d,c):this.trigger("error",this,d,c);return!1}});var m=h.Collection=function(a,c){c||(c={});c.model&&(this.model=c.model);c.comparator&&(this.comparator=c.comparator);
this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,{silent:!0,parse:c.parse})};g.extend(m.prototype,n,{model:z,initialize:function(){},toJSON:function(a){return this.map(function(c){return c.toJSON(a)})},add:function(a,d){var f,h,i,k,j,m={},u={},b=[];d||(d={});a=g.isArray(a)?a.slice():[a];f=0;for(h=a.length;f<h;f++){if(!(i=a[f]=this._prepareModel(a[f],d)))throw Error("Can't add an invalid model to a collection");k=i.cid;j=i.id;m[k]||this._byCid[k]||null!=j&&(u[j]||this._byId[j])?
b.push(f):m[k]=u[j]=i}for(f=b.length;f--;)a.splice(b[f],1);f=0;for(h=a.length;f<h;f++)(i=a[f]).on("all",this._onModelEvent,this),this._byCid[i.cid]=i,null!=i.id&&(this._byId[i.id]=i);this.length+=h;c.apply(this.models,[null!=d.at?d.at:this.models.length,0].concat(a));this.comparator&&this.sort({silent:!0});if(d.silent)return this;f=0;for(h=this.models.length;f<h;f++)if(m[(i=this.models[f]).cid])d.index=f,i.trigger("add",i,this,d);return this},remove:function(a,c){var d,f,h,i;c||(c={});a=g.isArray(a)?
a.slice():[a];d=0;for(f=a.length;d<f;d++)if(i=this.getByCid(a[d])||this.get(a[d]))delete this._byId[i.id],delete this._byCid[i.cid],h=this.indexOf(i),this.models.splice(h,1),this.length--,c.silent||(c.index=h,i.trigger("remove",i,this,c)),this._removeReference(i);return this},push:function(a,c){a=this._prepareModel(a,c);this.add(a,c);return a},pop:function(a){var c=this.at(this.length-1);this.remove(c,a);return c},unshift:function(a,c){a=this._prepareModel(a,c);this.add(a,g.extend({at:0},c));return a},
shift:function(a){var c=this.at(0);this.remove(c,a);return c},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return g.isEmpty(a)?[]:this.filter(function(c){for(var d in a)if(a[d]!==c.get(d))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var c=g.bind(this.comparator,this);1==this.comparator.length?
this.models=this.sortBy(c):this.models.sort(c);a.silent||this.trigger("reset",this,a);return this},pluck:function(a){return g.map(this.models,function(c){return c.get(a)})},reset:function(a,c){a||(a=[]);c||(c={});for(var d=0,f=this.models.length;d<f;d++)this._removeReference(this.models[d]);this._reset();this.add(a,g.extend({silent:!0},c));c.silent||this.trigger("reset",this,c);return this},fetch:function(a){a=a?g.clone(a):{};void 0===a.parse&&(a.parse=!0);var c=this,d=a.success;a.success=function(f,
g,h){c[a.add?"add":"reset"](c.parse(f,h),a);d&&d(c,f)};a.error=h.wrapError(a.error,c,a);return(this.sync||h.sync).call(this,"read",this,a)},create:function(a,c){var d=this,c=c?g.clone(c):{},a=this._prepareModel(a,c);if(!a)return!1;c.wait||d.add(a,c);var f=c.success;c.success=function(g,h){c.wait&&d.add(g,c);f?f(g,h):g.trigger("sync",a,h,c)};a.save(null,c);return a},parse:function(a){return a},chain:function(){return g(this.models).chain()},_reset:function(){this.length=0;this.models=[];this._byId=
{};this._byCid={}},_prepareModel:function(a,c){c||(c={});a instanceof z?a.collection||(a.collection=this):(c.collection=this,a=new this.model(a,c),a._validate(a.attributes,c)||(a=!1));return a},_removeReference:function(a){this==a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,c,d,f){("add"==a||"remove"==a)&&d!=this||("destroy"==a&&this.remove(c,f),c&&a==="change:"+c.idAttribute&&(delete this._byId[c.previous(c.idAttribute)],this._byId[c.id]=c),this.trigger.apply(this,
arguments))}});g.each("forEach each map reduce reduceRight find detect filter select reject every all some any include contains invoke max min sortBy sortedIndex toArray size first initial rest last without indexOf shuffle lastIndexOf isEmpty groupBy".split(" "),function(a){m.prototype[a]=function(){return g[a].apply(g,[this.models].concat(g.toArray(arguments)))}});var p=h.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},j=/:\w+/g,
q=/\*\w+/g,A=/[-[\]{}()+?.,\\^$|#\s]/g;g.extend(p.prototype,n,{initialize:function(){},route:function(a,c,d){h.history||(h.history=new v);g.isRegExp(a)||(a=this._routeToRegExp(a));d||(d=this[c]);h.history.route(a,g.bind(function(f){f=this._extractParameters(a,f);d&&d.apply(this,f);this.trigger.apply(this,["route:"+c].concat(f));h.history.trigger("route",this,c,f)},this));return this},navigate:function(a,c){h.history.navigate(a,c)},_bindRoutes:function(){if(this.routes){var a=[],c;for(c in this.routes)a.unshift([c,
this.routes[c]]);c=0;for(var d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])}},_routeToRegExp:function(a){a=a.replace(A,"\\$&").replace(j,"([^/]+)").replace(q,"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,c){return a.exec(c).slice(1)}});var v=h.History=function(){this.handlers=[];g.bindAll(this,"checkUrl")},s=/^[#\/]/,C=/msie [\w.]+/;v.started=!1;g.extend(v.prototype,n,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,c){if(null==a)if(this._hasPushState||c){var a=window.location.pathname,d=window.location.search;d&&(a+=d)}else a=this.getHash();a.indexOf(this.options.root)||(a=a.substr(this.options.root.length));return a.replace(s,"")},start:function(a){if(v.started)throw Error("Backbone.history has already been started");v.started=!0;this.options=g.extend({},{root:"/"},this.options,a);this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=
!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),c=document.documentMode;if(c=C.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c))this.iframe=k('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?k(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!c?k(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,
this.interval));this.fragment=a;a=window.location;c=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!c)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&c&&a.hash&&(this.fragment=this.getHash().replace(s,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},
stop:function(){k(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);v.started=!1},route:function(a,c){this.handlers.unshift({route:a,callback:c})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var c=this.fragment=this.getFragment(a);return g.any(this.handlers,
function(a){if(a.route.test(c))return a.callback(c),!0})},navigate:function(a,c){if(!v.started)return!1;if(!c||!0===c)c={trigger:c};var d=(a||"").replace(s,"");this.fragment!=d&&(this._hasPushState?(0!=d.indexOf(this.options.root)&&(d=this.options.root+d),this.fragment=d,window.history[c.replace?"replaceState":"pushState"]({},document.title,d)):this._wantsHashChange?(this.fragment=d,this._updateHash(window.location,d,c.replace),this.iframe&&d!=this.getFragment(this.getHash(this.iframe))&&(c.replace||
this.iframe.document.open().close(),this._updateHash(this.iframe.location,d,c.replace))):window.location.assign(this.options.root+a),c.trigger&&this.loadUrl(a))},_updateHash:function(a,c,d){d?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+c):a.hash=c}});var E=h.View=function(a){this.cid=g.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},F=/^(\S+)\s*(.*)$/,w="model collection el id attributes className tagName".split(" ");
g.extend(E.prototype,n,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();return this},make:function(a,c,d){a=document.createElement(a);c&&k(a).attr(c);d&&k(a).html(d);return a},setElement:function(a,c){this.$el&&this.undelegateEvents();this.$el=a instanceof k?a:k(a);this.el=this.$el[0];!1!==c&&this.delegateEvents();return this},delegateEvents:function(a){if(a||(a=D(this,"events"))){this.undelegateEvents();
for(var c in a){var d=a[c];g.isFunction(d)||(d=this[a[c]]);if(!d)throw Error('Method "'+a[c]+'" does not exist');var f=c.match(F),h=f[1],f=f[2],d=g.bind(d,this),h=h+(".delegateEvents"+this.cid);""===f?this.$el.bind(h,d):this.$el.delegate(f,h,d)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=g.extend({},this.options,a));for(var c=0,d=w.length;c<d;c++){var f=w[c];a[f]&&(this[f]=a[f])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,
!1);else{var a=D(this,"attributes")||{};this.id&&(a.id=this.id);this.className&&(a["class"]=this.className);this.setElement(this.make(this.tagName,a),!1)}}});z.extend=m.extend=p.extend=E.extend=function(a,c){var d=this,f;f=a&&a.hasOwnProperty("constructor")?a.constructor:function(){d.apply(this,arguments)};g.extend(f,d);y.prototype=d.prototype;f.prototype=new y;a&&g.extend(f.prototype,a);c&&g.extend(f,c);f.prototype.constructor=f;f.__super__=d.prototype;f.extend=this.extend;return f};var f={create:"POST",
update:"PUT","delete":"DELETE",read:"GET"};h.sync=function(a,c,d){var i=f[a];d||(d={});var j={type:i,dataType:"json"};d.url||(j.url=D(c,"url")||G());if(!d.data&&c&&("create"==a||"update"==a))j.contentType="application/json",j.data=JSON.stringify(c.toJSON());h.emulateJSON&&(j.contentType="application/x-www-form-urlencoded",j.data=j.data?{model:j.data}:{});if(h.emulateHTTP&&("PUT"===i||"DELETE"===i))h.emulateJSON&&(j.data._method=i),j.type="POST",j.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",
i)};"GET"!==j.type&&!h.emulateJSON&&(j.processData=!1);return k.ajax(g.extend(j,d))};h.wrapError=function(a,c,d){return function(f,g){g=f===c?g:f;a?a(c,g,d):c.trigger("error",c,g,d)}};var y=function(){},D=function(a,c){return!a||!a[c]?null:g.isFunction(a[c])?a[c]():a[c]},G=function(){throw Error('A "url" property or function must be specified');}}).call(this);(function(a,d){function i(a){if(""===g)return a;a=a.charAt(0).toUpperCase()+a.substr(1);return g+a}var c=Math,h=d.createElement("div").style,g;a:{for(var k=["t","webkitT","MozT","msT","OT"],r,n=0,z=k.length;n<z;n++)if(r=k[n]+"ransform",r in h){g=k[n].substr(0,k[n].length-1);break a}g=!1}var m=g?"-"+g.toLowerCase()+"-":"",p=i("transform"),j=i("transitionProperty"),q=i("transitionDuration"),A=i("transformOrigin"),v=i("transitionTimingFunction"),s=i("transitionDelay"),C=/android/gi.test(navigator.appVersion),
E=/iphone|ipad/gi.test(navigator.appVersion),k=/hp-tablet/gi.test(navigator.appVersion),F=i("perspective")in h,w="ontouchstart"in a&&!k,f=!!g,y=i("transition")in h,D="onorientationchange"in a?"orientationchange":"resize",G=w?"touchstart":"mousedown",e=w?"touchmove":"mousemove",l=w?"touchend":"mouseup",x=w?"touchcancel":"mouseup",I="Moz"==g?"DOMMouseScroll":"mousewheel",H;H=!1===g?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[g];var K=
a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)},t=a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout,B=F?" translateZ(0)":"",k=function(c,b){var e=this,g;e.wrapper="object"==typeof c?c:d.getElementById(c);e.wrapper.style.overflow=
"hidden";e.scroller=e.wrapper.children[0];e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:C,hideScrollbar:E,fadeScrollbar:E&&F,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){var b=a.explicitOriginalTarget?a.explicitOriginalTarget.nodeName.toLowerCase():
a.target?a.target.nodeName.toLowerCase():"";"select"!=b&&("option"!=b&&"input"!=b&&"textarea"!=b)&&a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(g in b)e.options[g]=b[g];e.x=e.options.x;e.y=e.options.y;e.options.useTransform=f&&e.options.useTransform;e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&
e.options.vScrollbar;e.options.zoom=e.options.useTransform&&e.options.zoom;e.options.useTransition=y&&e.options.useTransition;e.options.zoom&&C&&(B="");e.scroller.style[j]=e.options.useTransform?m+"transform":"top left";e.scroller.style[q]="0";e.scroller.style[A]="0 0";e.options.useTransition&&(e.scroller.style[v]="cubic-bezier(0.33,0.66,0.66,1)");e.options.useTransform?e.scroller.style[p]="translate("+e.x+"px,"+e.y+"px)"+B:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px";
e.options.useTransition&&(e.options.fixedScrollbar=!0);e.refresh();e._bind(D,a);e._bind(G);w||(e._bind("mouseout",e.wrapper),"none"!=e.options.wheelAction&&e._bind(I));e.options.checkDOMChanges&&(e.checkDOMTime=setInterval(function(){e._checkDOMChanges()},500))};k.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case G:if(!w&&0!==a.button)break;this._start(a);break;case e:this._move(a);break;
case l:case x:this._end(a);break;case D:this._resize();break;case I:this._wheel(a);break;case "mouseout":this._mouseout(a);break;case H:this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&(!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))&&this.refresh()},_scrollbar:function(a){var b;this[a+"Scrollbar"]?(this[a+"ScrollbarWrapper"]||(b=d.createElement("div"),this.options.scrollbarClass?b.className=
this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),b.style.cssText+=";pointer-events:none;"+m+"transition-property:opacity;"+m+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(b),this[a+"ScrollbarWrapper"]=
b,b=d.createElement("div"),this.options.scrollbarClass||(b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+m+"background-clip:padding-box;"+m+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+m+"border-radius:3px;border-radius:3px"),b.style.cssText+=";pointer-events:none;"+m+"transition-property:"+m+"transform;"+m+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+m+"transition-duration:0;"+m+"transform: translate(0,0)"+
B,this.options.useTransition&&(b.style.cssText+=";"+m+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[a+"ScrollbarWrapper"].appendChild(b),this[a+"ScrollbarIndicator"]=b),"h"==a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=c.max(c.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=
this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=c.max(c.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(a,!0)):this[a+"ScrollbarWrapper"]&&(f&&(this[a+"ScrollbarIndicator"].style[p]=
""),this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},C?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[p]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+B:(a=c.round(a),b=c.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=
b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var d="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(d*=this[a+"ScrollbarProp"],0>d?(this.options.fixedScrollbar||(d=this[a+"ScrollbarIndicatorSize"]+c.round(3*d),8>d&&(d=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px"),d=0):d>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?d=this[a+"ScrollbarMaxScroll"]:(d=this[a+"ScrollbarIndicatorSize"]-c.round(3*(d-this[a+"ScrollbarMaxScroll"])),8>d&&(d=
8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=d+"px",d=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-d))),this[a+"ScrollbarWrapper"].style[s]="0",this[a+"ScrollbarWrapper"].style.opacity=b&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[p]="translate("+("h"==a?d+"px,0)":"0,"+d+"px)")+B)},_start:function(a){var b=w?a.touches[0]:a,d,f;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,a);(this.options.useTransition||
this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&(w&&1<a.touches.length)&&(f=c.abs(a.touches[0].pageX-a.touches[1].pageX),d=c.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDistStart=c.sqrt(f*f+d*d),this.originX=c.abs(a.touches[0].pageX+a.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=c.abs(a.touches[0].pageY+a.touches[1].pageY-2*this.wrapperOffsetTop)/
2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,a));if(this.options.momentum&&(this.options.useTransform?(d=getComputedStyle(this.scroller,null)[p].replace(/[^0-9\-.,]/g,"").split(","),f=1*d[4],d=1*d[5]):(f=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),d=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),f!=this.x||d!=this.y))this.options.useTransition?this._unbind(H):t(this.aniTime),this.steps=[],this._pos(f,d);this.absStartX=this.x;this.absStartY=
this.y;this.startX=this.x;this.startY=this.y;this.pointX=b.pageX;this.pointY=b.pageY;this.startTime=a.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,a);this._bind(e);this._bind(l);this._bind(x)}},_move:function(a){var b=w?a.touches[0]:a,d=b.pageX-this.pointX,e=b.pageY-this.pointY,f=this.x+d,g=this.y+e,h=a.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,a);if(this.options.zoom&&w&&1<a.touches.length)f=c.abs(a.touches[0].pageX-
a.touches[1].pageX),g=c.abs(a.touches[0].pageY-a.touches[1].pageY),this.touchesDist=c.sqrt(f*f+g*g),this.zoomed=!0,b=1/this.touchesDistStart*this.touchesDist*this.scale,b<this.options.zoomMin?b=0.5*this.options.zoomMin*Math.pow(2,b/this.options.zoomMin):b>this.options.zoomMax&&(b=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/b)),this.lastScale=b/this.scale,f=this.originX-this.originX*this.lastScale+this.x,g=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[p]="translate("+
f+"px,"+g+"px) scale("+b+")"+B,this.options.onZoom&&this.options.onZoom.call(this,a);else{this.pointX=b.pageX;this.pointY=b.pageY;if(0<f||f<this.maxScrollX)f=this.options.bounce?this.x+d/2:0<=f||0<=this.maxScrollX?0:this.maxScrollX;if(g>this.minScrollY||g<this.maxScrollY)g=this.options.bounce?this.y+e/2:g>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=d;this.distY+=e;this.absDistX=c.abs(this.distX);this.absDistY=c.abs(this.distY);6>this.absDistX&&6>this.absDistY||
(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(g=this.y,e=0):this.absDistY>this.absDistX+5&&(f=this.x,d=0)),this.moved=!0,this._pos(f,g),this.dirX=0<d?-1:0>d?1:0,this.dirY=0<e?-1:0>e?1:0,300<h-this.startTime&&(this.startTime=h,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,a))}},_end:function(a){if(!(w&&0!==a.touches.length)){var b=this,f=w?a.changedTouches[0]:a,g,h,i={dist:0,time:0},j={dist:0,time:0},k=(a.timeStamp||Date.now())-
b.startTime,m=b.x,n=b.y;b._unbind(e);b._unbind(l);b._unbind(x);b.options.onBeforeScrollEnd&&b.options.onBeforeScrollEnd.call(b,a);if(b.zoomed)m=b.scale*b.lastScale,m=Math.max(b.options.zoomMin,m),m=Math.min(b.options.zoomMax,m),b.lastScale=m/b.scale,b.scale=m,b.x=b.originX-b.originX*b.lastScale+b.x,b.y=b.originY-b.originY*b.lastScale+b.y,b.scroller.style[q]="200ms",b.scroller.style[p]="translate("+b.x+"px,"+b.y+"px) scale("+b.scale+")"+B,b.zoomed=!1,b.refresh(),b.options.onZoomEnd&&b.options.onZoomEnd.call(b,
a);else{if(b.moved){if(300>k&&b.options.momentum){i=m?b._momentum(m-b.startX,k,-b.x,b.scrollerW-b.wrapperW+b.x,b.options.bounce?b.wrapperW:0):i;j=n?b._momentum(n-b.startY,k,-b.y,0>b.maxScrollY?b.scrollerH-b.wrapperH+b.y-b.minScrollY:0,b.options.bounce?b.wrapperH:0):j;m=b.x+i.dist;n=b.y+j.dist;if(0<b.x&&0<m||b.x<b.maxScrollX&&m<b.maxScrollX)i={dist:0,time:0};if(b.y>b.minScrollY&&n>b.minScrollY||b.y<b.maxScrollY&&n<b.maxScrollY)j={dist:0,time:0}}i.dist||j.dist?(i=c.max(c.max(i.time,j.time),10),b.options.snap&&
(j=m-b.absStartX,k=n-b.absStartY,c.abs(j)<b.options.snapThreshold&&c.abs(k)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(j=b._snap(m,n),m=j.x,n=j.y,i=c.max(j.time,i))),b.scrollTo(c.round(m),c.round(n),i)):b.options.snap?(j=m-b.absStartX,k=n-b.absStartY,c.abs(j)<b.options.snapThreshold&&c.abs(k)<b.options.snapThreshold?b.scrollTo(b.absStartX,b.absStartY,200):(j=b._snap(b.x,b.y),(j.x!=b.x||j.y!=b.y)&&b.scrollTo(j.x,j.y,j.time))):b._resetPos(200)}else w&&(b.doubleTapTimer&&b.options.zoom?
(clearTimeout(b.doubleTapTimer),b.doubleTapTimer=null,b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.zoom(b.pointX,b.pointY,1==b.scale?b.options.doubleTapZoom:1),b.options.onZoomEnd&&setTimeout(function(){b.options.onZoomEnd.call(b,a)},200)):this.options.handleClick&&(b.doubleTapTimer=setTimeout(function(){b.doubleTapTimer=null;for(g=f.target;1!=g.nodeType;)g=g.parentNode;"SELECT"!=g.tagName&&("INPUT"!=g.tagName&&"TEXTAREA"!=g.tagName)&&(h=d.createEvent("MouseEvents"),h.initMouseEvent("click",
!0,!0,a.view,1,f.screenX,f.screenY,f.clientX,f.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),h._fake=!0,g.dispatchEvent(h))},b.options.zoom?250:0))),b._resetPos(200);b.options.onTouchEnd&&b.options.onTouchEnd.call(b,a)}}},_resetPos:function(a){var b=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,c=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;if(b==this.x&&c==this.y){if(this.moved&&(this.moved=!1,this.options.onScrollEnd&&
this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==g&&(this.hScrollbarWrapper.style[s]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar)"webkit"==g&&(this.vScrollbarWrapper.style[s]="300ms"),this.vScrollbarWrapper.style.opacity="0"}else this.scrollTo(b,c,a||0)},_wheel:function(a){var b=this,c,d;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else if("detail"in
a)c=d=3*-a.detail;else return;if("zoom"==b.options.wheelAction){if(d=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale)!b.wheelZoomCount&&b.options.onZoomStart&&b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400)}else c=b.x+c,d=b.y+d,0<c?c=0:c<b.maxScrollX&&(c=b.maxScrollX),
d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),0>b.maxScrollY&&b.scrollTo(c,d,0)},_mouseout:function(a){var b=a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&(this._unbind(H),this._startAni())},_startAni:function(){var a=this,b=a.x,d=a.y,f=Date.now(),e,g,h;a.animating||(a.steps.length?(e=a.steps.shift(),e.x==b&&e.y==d&&(e.time=0),a.animating=!0,a.moved=!0,a.options.useTransition)?(a._transitionTime(e.time),
a._pos(e.x,e.y),a.animating=!1,e.time?a._bind(H):a._resetPos(0)):(h=function(){var i=Date.now(),j;if(i>=f+e.time){a._pos(e.x,e.y);a.animating=false;a.options.onAnimationEnd&&a.options.onAnimationEnd.call(a);a._startAni()}else{i=(i-f)/e.time-1;g=c.sqrt(1-i*i);i=(e.x-b)*g+b;j=(e.y-d)*g+d;a._pos(i,j);if(a.animating)a.aniTime=K(h)}},h()):a._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[q]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[q]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[q]=
a)},_momentum:function(a,b,d,e,f){var b=c.abs(a)/b,g=b*b/0.0012;0<a&&g>d?(d+=f/(6/(6E-4*(g/b))),b=b*d/g,g=d):0>a&&g>e&&(e+=f/(6/(6E-4*(g/b))),b=b*e/g,g=e);return{dist:g*(0>a?-1:1),time:c.round(b/6E-4)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(a,b){var d,e,f;f=this.pagesX.length-1;d=0;for(e=this.pagesX.length;d<e;d++)if(a>=this.pagesX[d]){f=d;break}f==
this.currPageX&&(0<f&&0>this.dirX)&&f--;a=this.pagesX[f];e=(e=c.abs(a-this.pagesX[this.currPageX]))?500*(c.abs(this.x-a)/e):0;this.currPageX=f;f=this.pagesY.length-1;for(d=0;d<f;d++)if(b>=this.pagesY[d]){f=d;break}f==this.currPageY&&(0<f&&0>this.dirY)&&f--;b=this.pagesY[f];d=(d=c.abs(b-this.pagesY[this.currPageY]))?500*(c.abs(this.y-b)/d):0;this.currPageY=f;f=c.round(c.max(e,d))||200;return{x:a,y:b,time:f}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,
b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){this.scroller.style[p]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this._unbind(D,a);this._unbind(G);this._unbind(e);this._unbind(l);this._unbind(x);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(I));this.options.useTransition&&this._unbind(H);this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},
refresh:function(){var a,b,d,e=0;b=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=c.round(this.scroller.offsetWidth*this.scale);this.scrollerH=c.round((this.scroller.offsetHeight+this.minScrollY)*this.scale);this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;
this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=
[];d=this.scroller.querySelectorAll(this.options.snap);a=0;for(b=d.length;a<b;a++)e=this._offset(d[a]),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,this.pagesX[a]=e.left<this.maxScrollX?this.maxScrollX:e.left*this.scale,this.pagesY[a]=e.top<this.maxScrollY?this.maxScrollY:e.top*this.scale}else if(this.options.snap){for(this.pagesX=[];e>=this.maxScrollX;)this.pagesX[b]=e,e-=this.wrapperW,b++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-
1]+this.pagesX[this.pagesX.length-1]);b=e=0;for(this.pagesY=[];e>=this.maxScrollY;)this.pagesY[b]=e,e-=this.wrapperH,b++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[q]="0",this._resetPos(200))},scrollTo:function(a,b,c,d){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:c,relative:d}]);a=0;for(b=e.length;a<b;a++)e[a].relative&&
(e[a].x=this.x-e[a].x,e[a].y=this.y-e[a].y),this.steps.push({x:e[a].x,y:e[a].y,time:e[a].time||0});this._startAni()},scrollToElement:function(a,b){var d;if(a=a.nodeType?a:this.scroller.querySelector(a))d=this._offset(a),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,b=void 0===b?c.max(2*c.abs(d.left),2*c.abs(d.top)):b,this.scrollTo(d.left,
d.top,b)},scrollToPage:function(a,b,c){c=void 0===c?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);if(this.options.snap)a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b];else if(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=
this.maxScrollX),b<this.maxScrollY)b=this.maxScrollY;this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(e);this._unbind(l);this._unbind(x)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(H):t(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,b,c,d){var e=c/this.scale;this.options.useTransform&&(this.zoomed=!0,d=void 0===d?200:d,a=a-this.wrapperOffsetLeft-this.x,b=b-this.wrapperOffsetTop-
this.y,this.x=a-a*e+this.x,this.y=b-b*e+this.y,this.scale=c,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[q]=d+"ms",this.scroller.style[p]="translate("+this.x+"px,"+this.y+"px) scale("+c+")"+B,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};h=null;"undefined"!==typeof exports?exports.iScroll=k:a.iScroll=k})(window,document);window.HomePage=Backbone.View.extend({initialize:function(){var a=templateLoader.get("home/home");this.template=_.template(a)},render:function(){$(this.el).html(this.template({}));return this}});function memberSearch(){0===memberCollection.length?navigator.notification.alert("No member records have been loaded. Go to the Settings page to retrieve the data.",function(){},"No Data"):window.location.href="#membersearch"}
function trialSearch(){0===clinicalTrialCollection.length?navigator.notification.alert("No clinical trials have been loaded. Go to the Settings page to retrieve the data.",function(){},"No Data"):window.location.href="#trialsearch"}function resourceSearch(){0===sharedResourceCollection.length?navigator.notification.alert("No shared resources have been loaded. Go to the Settings page to retrieve the data.",function(){},"No Data"):window.location.href="#sharedresourcesearch"};window.SettingsPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("settings/settings"))},render:function(){var a="No Data Loaded";null!==CAMI.AppDataService.lastUpdatedDate&&void 0!==CAMI.AppDataService.lastUpdatedDate&&(a=CAMI.formatDate(CAMI.AppDataService.lastUpdatedDate));if(CAMI.AppDataService.loadingMembers||CAMI.AppDataService.loadingTrials||CAMI.AppDataService.loadingResources)a="Loading...";$(this.el).html(this.template({members:memberCollection.length,
trials:clinicalTrialCollection.length,resources:sharedResourceCollection.length,lastUpdatedDate:a}));return this}});window.MemberSearchPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("members/member_search"))},render:function(){$(this.el).html(this.template({}));return this}});window.MemberResultsPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("members/member_results"))},render:function(){var a;""===CAMI.searchType?(a=filteredMembers[0].attributes.lastName.charAt(0),$(this.el).html(this.template())):(a=this.model.models[0].attributes.name.charAt(0),$(this.el).html(""));var d="<div id='resultScroll'><dl><dt id='nav-"+a+"' name='"+a+"'>"+a+"</dt>",i=_.template(templateLoader.get("members/member_list_item"));$.each(""===CAMI.searchType?
filteredMembers:this.model.models,function(c,h){var g=h.attributes,k=CAMI.searchType===""?g.lastName.toUpperCase().charAt(0):g.name.toUpperCase().charAt(0);if(k!==a){d=d+("</dl><dl><dt name='"+k+"' id='nav-"+k+"'>"+k+"</dt>");a=k}d=CAMI.searchType===""?d+i({name:CAMI.htmlEscape(g.lastName+", "+g.firstName),link:"#memberinfo/"+g.memberID}):d+i({name:CAMI.htmlEscape(g.name),link:"#memberresults/0"})});d+="</dl></div>";$(this.el).append(d);return this}});
function itemClicked(a,d){CAMI.searchName=a;window.location.href=d}function filterMembers(){var a=$("#searchBar").val(),d=_.filter(searchedMembers,function(d){return startsWith(d.attributes.firstName,a)||startsWith(d.attributes.lastName,a)||startsWith(d.attributes.firstName+" "+d.attributes.lastName,a)});0===d.length?navigator.notification.alert("Your search did not return any results.",function(){},"No Results"):(filteredMembers=d,app.currentPage.render())}
function startsWith(a,d){return 0===a.toUpperCase().indexOf(d.toUpperCase())}function scrollToLetter(a){document.getElementById(a).scrollIntoView()};window.MemberInfoPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("members/member_info"))},render:function(){$(this.el).html(this.template(this.model.toJSON()));return this}});window.ClinicalTrialSearchPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("clinical_trials/clinical_trial_search"))},render:function(){$(this.el).html("");$(this.el).html(this.template({}));return this},setupBioMarker:function(){var a=$("#biomarker"),d=a.children("input")[0];CAMI.bioMarker&&a.toggleClass("on");a.hasClass("on")&&(d.checked=!0);a.click(function(){a.toggleClass("on");a.toggleClass("off");d.checked=!d.checked})},setupDropDownMenus:function(){populateDropDownMenu(siteCollection.models,
"#institution",CAMI.institution);populateDropDownMenu(diseaseSiteCollection.models,"#diseaseSite",CAMI.diseaseGroup);populateDropDownMenu(phaseCollection.models,"#phase",CAMI.phase);populateDropDownMenu(coopGroupCollection.models,"#coopGroup",CAMI.coopGroup);setTimeout(fixAndroidDropdowns,2E3)}});
function populateDropDownMenu(a,d,i){var c=$(d);c.append("<option value='Any'>Any</option>");$.each(a,function(a,d){var k=d.attributes.name,r=CAMI.htmlEscape(k)===i?" selected":"";c.append('<option value="'+CAMI.htmlEscape(k)+'"'+r+">"+k+"</option>")})}function fixAndroidDropdowns(){var a=$("#institution");a.css({position:"relative",zIndex:999,visibility:"visible"});a.data("force-update","true");a.data("force-update","forced");$(".trials-search").append("&nbsp;")}
function searchTrials(){CAMI.institution=$("#institution").val();CAMI.diseaseGroup=$("#diseaseSite").val();CAMI.phase=$("#phase").val();CAMI.coopGroup=$("#coopGroup").val();CAMI.bioMarker=$("#biomarker-checkbox")[0].checked;clinicalTrialResults=_.filter(clinicalTrialCollection.models,function(a){var d="Any"===CAMI.institution;$.each(a.attributes.sites,function(a,c){CAMI.htmlEscape(c)===CAMI.institution&&(d=!0)});var i="Any"===CAMI.diseaseGroup||CAMI.htmlEscape(a.attributes.diseaseGroup)===CAMI.diseaseGroup,
c="Any"===CAMI.phase||CAMI.htmlEscape(a.attributes.phase)===CAMI.phase,h="Any"===CAMI.coopGroup||CAMI.htmlEscape(a.attributes.sponsor)===CAMI.coopGroup&&a.attributes.coopGroup,a=!0===CAMI.bioMarker&&"Y"===a.attributes.bioMarker.charAt(0)||!1===CAMI.bioMarker&&"N"===a.attributes.bioMarker.charAt(0);return d&&i&&c&&h&&a});0===clinicalTrialResults.length?navigator.notification.alert("No results found. Try changing your search criteria.",function(){},"No Results"):window.location.href="#trialresults"}
;window.ClinicalTrialResultsPage=Backbone.View.extend({tagName:"div",id:"clinical-trial-search-results",initialize:function(){this.template=_.template(templateLoader.get("clinical_trials/clinical_trial_results"));this.itemTemplate=_.template(templateLoader.get("clinical_trials/clinical_trial_result_button"))},render:function(){$(this.el).html("");var a=this.template({items:$(clinicalTrialResults),itemTemplate:this.itemTemplate});$(this.el).append(a);return this}});window.ClinicalTrialInfoPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("clinical_trials/clinical_trial_info"))},render:function(){var a=this.model.attributes,d="";$.each(a.sites,function(a,c){0<a&&(d+="<br />");d+=c});a.participatingSites=d;$(this.el).html(this.template(a));return this}});window.SharedResourcesSearchPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("shared_resources/shared_resources_search"))},render:function(){var a="<div class='menu'>";$(this.el).html(this.template({}));$.each(sharedResourceCollection.models,function(d,i){a+=(new SharedResourceButton({id:i.attributes.SharedResourceID,name:i.attributes.sharedResourceName})).render().el.innerHTML});a+="</div>";$(this.el).append(a);return this}});
window.SharedResourceButton=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("shared_resources/shared_resources_button"))},tagName:"a",className:"menu-btn",render:function(){$(this.el).html(this.template({id:this.options.id,name:this.options.name}));return this}});window.SharedResourcesInfoPage=Backbone.View.extend({initialize:function(){this.template=_.template(templateLoader.get("shared_resources/shared_resources_info"))},render:function(){$(this.el).html(this.template(this.model.toJSON()));return this}});window.Member=Backbone.Model.extend({url:function(){return"/members/"+this.attributes.memberID}});window.ClinicalTrial=Backbone.Model.extend({url:function(){return"/trials/"+this.attributes.trialID}});window.School=Backbone.Model.extend({});window.Division=Backbone.Model.extend({});window.Department=Backbone.Model.extend({});window.Rank=Backbone.Model.extend({});window.PrimaryProgram=Backbone.Model.extend({});window.Institution=Backbone.Model.extend({});window.Phase=Backbone.Model.extend({});window.CoopGroup=Backbone.Model.extend({});window.DiseaseSite=Backbone.Model.extend({});window.Site=Backbone.Model.extend({});window.SharedResource=Backbone.Model.extend({url:function(){return"/resource/"+this.SharedResourceID}});window.MemberCollection=Backbone.Collection.extend({model:Member,comparator:function(a){return a.get("lastName").toUpperCase()},parse:function(a){this.reset();var d=[];$.each(a.GetAllMembershipsResult,function(a,c){var h=new Member({asOf:c.AsOf.substring(0,c.AsOf.length-12),campusBox:c.CampusBox,department:c.Department,division:c.Division,email:c.Email,facultyRack:c.FacultyRack,fax:c.Fax,firstName:c.FirstName,institution:c.Institution,lastName:c.LastName,memberID:c.MemberID,phone:c.Phone,primaryProgram:c.PrimaryProgram,
secondaryProgram:c.SecondaryProgram,school:c.School,type:c.Type});d.push(h)});return d},url:function(){return"http://risr.org/CUServices.svc/GetMembers"}});window.ClinicalTrialCollection=Backbone.Collection.extend({model:ClinicalTrial,comparator:function(a){return a.name},parse:function(a){this.reset();var d=[];$.each(a.GetAllTrialsResult,function(a,c){var h=new ClinicalTrial({bioMarker:c.BioMarker,contactEmail:c["Contact Email"],contactName:c["Contact Name"],contactPhone:c["Contact Phone"],coopGroup:c.CoopGroup,diseaseGroup:c["Disease Group"],eligibility:c.Eligibility,irbNumber:c["IRB Number"],name:c.Name,objective:c.Objective,primaryPI:c["Primary PI"],
sites:c.Sites,sponsor:c.Sponsor,trialID:c.TrialId,phase:c.Phase});h.attributes.investigator=c.MemberID;d.push(h)});return d},url:function(){return"http://risr.org/CUServices.svc/GetTrials"}});window.SchoolCollection=Backbone.Collection.extend({model:School,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("school");$.each(d,function(d,c){a.push(new School({name:c}))})}}});window.DivisionCollection=Backbone.Collection.extend({model:Division,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("division");$.each(d,function(d,c){a.push(new Division({name:c}))})}}});
window.DepartmentCollection=Backbone.Collection.extend({model:Department,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("department");$.each(d,function(d,c){a.push(new Department({name:c}))})}}});window.RankCollection=Backbone.Collection.extend({model:Rank,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("facultyRack");$.each(d,function(d,c){a.push(new Rank({name:c}))})}}});
window.PrimaryProgramCollection=Backbone.Collection.extend({model:PrimaryProgram,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("primaryProgram");$.each(d,function(d,c){a.push(new PrimaryProgram({name:c}))})}}});
window.InstitutionCollection=Backbone.Collection.extend({model:Institution,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromMembers("institution");$.each(d,function(d,c){a.push(new Institution({name:c}))})}}});function getInfoFromMembers(a){var d=[];$.each(memberCollection.models,function(i,c){-1===$.inArray(c.attributes[a],d)&&(""!==c.attributes[a]&&"("!==c.attributes[a].charAt(0))&&d.push(c.attributes[a])});return d};window.PhaseCollection=Backbone.Collection.extend({model:Phase,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromTrials("phase");$.each(d,function(d,c){a.push(new Phase({name:c}))})}}});window.CoopGroupCollection=Backbone.Collection.extend({model:CoopGroup,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromTrials("sponsor");$.each(d,function(d,c){a.push(new CoopGroup({name:c}))})}}});
window.DiseaseSiteCollection=Backbone.Collection.extend({model:DiseaseSite,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=getInfoFromTrials("diseaseGroup");$.each(d,function(d,c){a.push(new DiseaseSite({name:c}))})}}});
window.SiteCollection=Backbone.Collection.extend({model:Site,comparator:function(a){return a.get("name")},populate:function(){var a=this;if(!(0<a.length)){var d=[];$.each(clinicalTrialCollection.models,function(a,c){$.each(c.attributes.sites,function(a,c){-1===$.inArray(c,d)&&(""!==c&&"("!==c.charAt(0))&&d.push(c)})});$.each(d,function(d,c){a.push(new Site({name:c}))})}}});
function getInfoFromTrials(a){var d=[];$.each(clinicalTrialCollection.models,function(i,c){-1===$.inArray(c.attributes[a],d)&&(""!==c.attributes[a]&&"("!==c.attributes[a].charAt(0))&&d.push(c.attributes[a])});return d};window.SharedResourceCollection=Backbone.Collection.extend({model:SharedResource,comparator:function(a){return a.get("sharedResourceName").toUpperCase()},parse:function(a){this.reset();var d=[];$.each(a.GetAllSharedResourcesResult,function(a,c){var h=new SharedResource({contactEmail:c.ContactEmail,contactPhone:c.ContactPhone,services:c.Services,sharedResourceName:c.SharedResourceName,SharedResourceID:c.SharedResourcesID});d.push(h)});return d},url:function(){return"http://risr.org/CUServices.svc/GetSharedResources"}});(function(a,d,i){a.AppDataService={lastUpdatedDate:null,loadingMembers:!1,loadingTrials:!1,loadingResources:!1,HOURS_TO_LOAD_NEW_DATA:24,loadData:function(){if(!this.loadingMembers&&!this.loadingTrials&&!this.loadingResources)if(this.loadingResources=this.loadingTrials=this.loadingMembers=!0,schoolCollection.reset(),departmentCollection.reset(),divisionCollection.reset(),institutionCollection.reset(),rankCollection.reset(),primaryProgramCollection.reset(),phaseCollection.reset(),diseaseSiteCollection.reset(),
siteCollection.reset(),coopGroupCollection.reset(),a.haveInternet())console.log("Retrieving Data from the internet"),a.AppDataService.fetchCollection(memberCollection,function(){a.AppDataService.loadingMembers=!1}),a.AppDataService.fetchCollection(clinicalTrialCollection,function(){a.AppDataService.loadingTrials=!1}),a.AppDataService.fetchCollection(sharedResourceCollection,function(){a.AppDataService.loadingResources=!1});else{console.log("Retrieving Data from localStorage");try{var c=JSON.parse(localStorage.getItem("clinicalTrialCollection"));
d.each(c,function(a,c){clinicalTrialCollection.push(c)});var h=JSON.parse(localStorage.getItem("memberCollection"));d.each(h,function(a,c){memberCollection.push(c)});var g=JSON.parse(localStorage.getItem("sharedResourceCollection"));d.each(g,function(a,c){sharedResourceCollection.push(c)});this.lastUpdatedDate=new Date(JSON.parse(localStorage.getItem("CAMI.AppDataService.lastUpdatedDate")))}catch(i){console.log(i)}this.loadingResources=this.loadingMembers=this.loadingTrials=!1;"Settings"===AppRouter.currentPageName&&
AppRouter.currentPage.render()}},fetchCollection:function(c,d){c.fetch({type:"GET",contentType:"application/json; charset=utf-8",datatype:"json",async:!0,error:function(){navigator.notification.alert("Error retrieving data. Go to the Settings page to try loading data.",function(){},"Data Problem");d()},success:function(){d();a.AppDataService.doneLoading()}})},checkLoadData:function(){null===this.lastUpdatedDate||this.lastUpdatedDate===i||((new Date-this.lastUpdatedDate)/36E5>this.HOURS_TO_LOAD_NEW_DATA&&
a.haveInternet()&&(console.log("Haven't loaded data in a while, loading from services now"),this.loadData()),eed)},doneLoading:function(){!this.loadingMembers&&(!this.loadingTrials&&!this.loadingResources)&&(this.lastUpdatedDate=new Date,localStorage.clear(),localStorage.setItem("CAMI.AppDataService.lastUpdatedDate",JSON.stringify(this.lastUpdatedDate)),localStorage.setItem("memberCollection",JSON.stringify(memberCollection)),localStorage.setItem("clinicalTrialCollection",JSON.stringify(clinicalTrialCollection)),
localStorage.setItem("sharedResourceCollection",JSON.stringify(sharedResourceCollection)));window.app!=i&&"Settings"===window.app.currentPageName&&window.app.currentPage.render()}}})(window.CAMI=window.CAMI||{},Zepto);var AppRouter=Backbone.Router.extend({currentPageName:"Home",pageHistory:[],routes:{"":"home",home:"home",settings:"settings",membersearch:"memberSearch","memberresults/:id":"memberResults","memberinfo/:id":"memberInfo",trialsearch:"trialSearch",trialresults:"trialResults","trialinfo/:id":"trialInfo",sharedresourcesearch:"sharedResourcesSearch","sharedresourceinfo/:id":"sharedResourcesInfo"},initialize:function(){$("#content").html("");this.homePage=new HomePage;this.homePage.render();myScroll.refresh()},
home:function(){this.currentPageName="Home";this.slidePage(this.homePage)},settings:function(){this.currentPageName="Settings";this.slidePage((new SettingsPage).render())},memberSearch:function(){this.currentPageName="Member Search";CAMI.searchType="";CAMI.searchName="";this.slidePage((new MemberSearchPage).render())},memberResults:function(a){0===parseInt(a)&&(searchedMembers=_.filter(memberCollection.models,function(a){switch(CAMI.searchType){case "Department":return CAMI.htmlEscape(a.attributes.department)===
CAMI.searchName;case "Division":return CAMI.htmlEscape(a.attributes.division)===CAMI.searchName;case "School":return CAMI.htmlEscape(a.attributes.school)===CAMI.searchName;case "Rank":return CAMI.htmlEscape(a.attributes.facultyRack)===CAMI.searchName;case "Program":return CAMI.htmlEscape(a.attributes.primaryProgram)===CAMI.searchName;case "Institution":return CAMI.htmlEscape(a.attributes.institution)===CAMI.searchName;default:return!0}}));switch(a){case "1":this.currentPageName="Departments";departmentCollection.populate();
CAMI.searchType="Department";this.slidePage((new MemberResultsPage({model:departmentCollection})).render());break;case "2":this.currentPageName="Divisions";divisionCollection.populate();CAMI.searchType="Division";this.slidePage((new MemberResultsPage({model:divisionCollection})).render());break;case "3":this.currentPageName="Schools";schoolCollection.populate();CAMI.searchType="School";this.slidePage((new MemberResultsPage({model:schoolCollection})).render());break;case "4":this.currentPageName="Ranks";
rankCollection.populate();CAMI.searchType="Rank";this.slidePage((new MemberResultsPage({model:rankCollection})).render());break;case "5":this.currentPageName="Primary Programs";primaryProgramCollection.populate();CAMI.searchType="Program";this.slidePage((new MemberResultsPage({model:primaryProgramCollection})).render());break;case "6":this.currentPageName="Institutions";institutionCollection.populate();CAMI.searchType="Institution";this.slidePage((new MemberResultsPage({model:institutionCollection})).render());
break;default:this.currentPageName="Members",filteredMembers=searchedMembers,CAMI.searchType="",a=(new MemberResultsPage).render(),this.slidePage(a)}},memberInfo:function(a){this.currentPageName="Member Info";var d=memberCollection.find(function(d){return d.attributes.memberID===a});this.slidePage((new MemberInfoPage({model:d})).render())},trialSearch:function(){this.currentPageName="Trial Search";phaseCollection.populate();coopGroupCollection.populate();siteCollection.populate();diseaseSiteCollection.populate();
var a=(new ClinicalTrialSearchPage).render();this.slidePage(a);a.setupBioMarker();a.setupDropDownMenus()},trialResults:function(){this.currentPageName="Trials";this.slidePage((new ClinicalTrialResultsPage).render())},trialInfo:function(a){var a=parseInt(a),d=clinicalTrialCollection.find(function(d){return d.attributes.trialID===a});this.currentPageName="Trial Info";this.slidePage((new ClinicalTrialInfoPage({model:d})).render())},sharedResourcesSearch:function(){this.currentPageName="Shared Resources";
this.slidePage((new SharedResourcesSearchPage).render())},sharedResourcesInfo:function(a){this.currentPageName="Shared Resources";var d=sharedResourceCollection.find(function(d){return d.attributes.SharedResourceID===a});this.slidePage((new SharedResourcesInfoPage({model:d})).render())},slidePage:function(a){myScroll.scrollTo(0,0,0);if(this.currentPage){$(".stage-right, .stage-left").remove();var d;a===this.homePage?(d="left",$(a.el).attr("class","page stage-left"),this.pageHistory=[window.location.hash],
document.getElementById("header").style.display="none"):(1<this.pageHistory.length&&window.location.hash===this.pageHistory[this.pageHistory.length-2]?(d="left",$(a.el).attr("class","page stage-left"),this.pageHistory.pop()):(d="right",$(a.el).attr("class","page stage-right"),this.pageHistory.push(window.location.hash)),document.getElementById("header").style.display="block");$("#content").append(a.el);var i=this;setTimeout(function(){$(i.currentPage.el).attr("class","page transition "+(d==="right"?
"stage-left":"stage-right"));$(a.el).attr("class","page stage-center transition");i.currentPage=a;$("#headerTitle").html(i.currentPageName);window.scrollTo(0,0);myScroll.manualHeightSet(a,"content");setTimeout(function(){myScroll.refresh()},0)});CAMI.AppDataService.checkLoadData()}else $(a.el).attr("class","page stage-center"),$("#content").append(a.el),this.pageHistory=[window.location.hash],this.currentPage=a}});window.CAMI=window.CAMI||{};
(function(a,d){a.searchName="";a.searchType="";a.institution="";a.diseaseGroup="";a.phase="";a.coopGroup="";a.bioMarker=!1;a.isTouchDevice=null;a.htmlEscape=function(a){return String(a).replace(/'/g,"")};a.haveInternet=function(){return navigator.onLine};a.formatDate=function(a){var c=a.getMonth()+1,d=a.getDate(),g=a.getFullYear(),k=a.getHours(),a=a.getMinutes(),r="AM";10>a&&(a="0"+a);11<k&&(r="PM");12<k&&(k-=12);return c+"/"+d+"/"+g+" "+k+":"+a+"&nbsp;"+r};a.getDevice=function(){if(null===a.isTouchDevice&&
navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)){var i="",i=navigator.userAgent.match(/iPhone/i)?"iPhone":navigator.userAgent.match(/iPad/i)?"iPad":navigator.userAgent.match(/Android/i)?"Android":"UnkownDevice";d("body").addClass(i);a.isTouchDevice=!0;console.log("Device platform : "+i)}return a.isTouchDevice};a.onAndroid=function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")}})(window.CAMI=window.CAMI||{},Zepto);
var myScroll,phaseCollection=new PhaseCollection,coopGroupCollection=new CoopGroupCollection,diseaseSiteCollection=new DiseaseSiteCollection,siteCollection=new SiteCollection,schoolCollection=new SchoolCollection,departmentCollection=new DepartmentCollection,divisionCollection=new DivisionCollection,institutionCollection=new InstitutionCollection,rankCollection=new RankCollection,primaryProgramCollection=new PrimaryProgramCollection,memberCollection=new MemberCollection,clinicalTrialCollection=new ClinicalTrialCollection,
sharedResourceCollection=new SharedResourceCollection,searchedMembers=[],filteredMembers=[],clinicalTrialResults=[],templateLoader={templates:{},toLoad:0,loadTemplates:function(a,d){var i=[],c=this;this.toLoad=a.length;$.each(a,function(a,g){i.push($.get("templates/"+g+".html",function(a){c.templates[g]=a;0===--c.toLoad&&d()},"text"))})},get:function(a){return this.templates[a]}};
function instantiateScroller(){myScroll=new iScroll("content-wrapper",{checkDOMChanges:!1});myScroll.manualHeightSet=function(a,d){var i=document.getElementById(d);null!==i&&(i.style.height="auto",i.style.height=a.el.scrollHeight+"px")}}document.addEventListener("touchmove",function(a){a.preventDefault()},!1);
function onDeviceReady(){CAMI.getDevice();CAMI.AppDataService.loadData();instantiateScroller();templateLoader.loadTemplates("home/home settings/settings members/member_search members/member_results members/member_info members/member_list_item clinical_trials/clinical_trial_search clinical_trials/clinical_trial_info clinical_trials/clinical_trial_results clinical_trials/clinical_trial_result_button shared_resources/shared_resources_info shared_resources/shared_resources_search shared_resources/shared_resources_button".split(" "),function(){app=
new AppRouter;Backbone.history.start()});$("#about-back-button").tap(function(){history.go(-1)});if(!CAMI.isTouchDevice||void 0===window.cordova)$("#about-back-button").click(function(){history.go(-1)}),navigator.notification={alert:function(a){alert(a)}};document.getElementById("content").addEventListener("webkitTransitionEnd",function(){$(".stage-right, .stage-left").remove();$(".page").attr("class","page page-post-transition stage-center transition")},!1)}onDeviceReady();
